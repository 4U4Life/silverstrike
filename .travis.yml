sudo: false
language: python
python:
  - 3.6
notifications:
  on_success: never
  on_failure: never
branches:
  except:
  - heroku
before_script:
- pip install tox
jobs:
  include:
    - stage: test
      script: tox -e django_111
    - script: tox -e django_110
    - script: tox -e flake
    - script: tox -e codecov
    - stage: test
      python: 3.5
      script: tox -e django_111
    - stage: test
      python: 3.5
      script: tox -e django_110
    - stage: deploy
      python: 2.7
      before_script: skip
      script: skip
      before_deploy:
      - rm demo -rf
      - mv heroku/requirements.txt .
      - mv heroku/Procfile .
      deploy:
        provider: heroku
        app: silverstrike 
        on: master
        run:
        - python heroku/manage.py migrate --noinput
        skip_cleanup: true
        api_key:
          secure: buIiJussqliQ2QX3bqovHu8/f0qJLksSO5r+SOZqSL9qTTTSJ39gVrkxSmX6PMNcDp+8QHJs2GnZbE1pI/D++EdyQxT4q4EfwzKr2SD0IggxbWCVbiNZuai+5kBjrSffcXi/lUJLfFHpIKfiQsH6QmqEFS5+5Cz175tRQgz2QOChXIwk587VckJaYaJYSagnIyCtrIsACyTxGCcRlsOcd/RYzj8wm5hnIRK8NcUD80dINLIYycJC/k9oq/qOIv3h0y+zzG0VRDSa4xg/XHBKpoMIezTf1qsAMnzH8MZVQL8/YN0voMNj2G48fV+ATM8+vBCmVa46NrLUWaQfh/Kq181+g50XG0Hjm3JunBSSNqF1uYhR7GXSOgRNlqkkS6u5Qlk4QHrE+JRoBR5imEoxqw+N14tWb9aFzaTCK9Dn9Tj6XfCwBFifd1Rxhq65bxffEYPkHtmboCrKJgL1Y/vCnomrlw6nzuHqUj9JoOYD04MrkAZweXr59EkQ7H0VqxHSu3e5fhTzVxH7o70576bvd4l86E8RfH9bmFhF77PQHo1wi0EpX3VTnu0bayXTptPyOgMTRxrEIkd86Q5BxY1l9ZKvGuPfCgWjolVb6cIlQ79NFyJxPpCOwLjM/YOEF2iTsuYToKEpQnfesxqXXkyL45yiaIotsT4wxeh5ZPXn+EI=
